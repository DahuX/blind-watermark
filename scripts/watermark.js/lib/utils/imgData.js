"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var click=function(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(a){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}},spreadArr=function(t){var e=[];t.forEach((function(t){return e=[].concat(_toConsumableArray(e),[t])}))},getCanvasDom=function(){var t="sherry-chris-b-wm-g-i-c-c",e=document.getElementById(t);if(!e){var a=document.createElement("canvas");a.style.opacity=0,a.style.position="absolute",a.style.left="-999999px",a.id=t,document.body.appendChild(a),e=a}return e},getData=function(t){var e;if("img"===(null===(e=t.tagName)||void 0===e?void 0:e.toLowerCase())){if(0!==t.width&&0!==t.height){var a=getCanvasDom();a.width=t.width,a.height=t.height;var r=a.getContext("2d");r.drawImage(t,0,0);var o=r.getImageData(0,0,t.width,t.height),n=o.data,i=o.width,d=o.height,s=[],u=[],c=[],l=[],h=[s,u,c,l];return n.forEach((function(t,e){var a=e%4,r=Math.floor(e/4),o=Math.floor(r/i),n=r%i;h[a][o]||(h[a][o]=[]),h[a][o][n]=t})),{imgData:o,width:i,height:d,R:s,G:u,B:c,A:l}}console.error("请输入有效图片")}else console.error("未传入图片dom",t)},setData=function(t,e){var a=t.R,r=t.G,o=t.B,n=t.A,i=void 0===n?[]:n,d=t.width,s=t.height,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"download",c=a.join(",").split(","),l=r.join(",").split(","),h=o.join(",").split(","),f=i.join(",").split(","),g=getCanvasDom();g.width=d,g.height=s;for(var y=g.getContext("2d"),m=y.createImageData(d,s),p=0;p<c.length;p++){var v=4*p;m.data[v]=c[p],m.data[v+1]=l[p],m.data[v+2]=h[p],m.data[v+3]=f[p]||255}if(y.putImageData(m,0,0),e){var w=document.createElement("a");w.href=g.toDataURL(),w.download=u,setTimeout((function(){window.URL.revokeObjectURL(w.href)}),4e4),setTimeout((function(){click(w)}),0)}},getTwoEnds=function(t){var e=getData(t),a=e.width,r=e.height,o=e.R,n=e.G,i=e.B,d=e.A,s=o.join(",").split(","),u=n.join(",").split(","),c=i.join(",").split(",");return{width:a,height:r,data:d.join(",").split(",").map((function(t,e){return Math.max((s[e],u[e],c[e]))>127.5}))}},setTwoEnds=function(t,e){var a=t.data,r=t.width,o=t.height,n=a.map((function(t){return 255*t}));setData({R:n,G:n,B:n,width:r,height:o},!0,e)},_default={getData:getData,setData:setData,getTwoEnds:getTwoEnds,setTwoEnds:setTwoEnds};exports.default=_default;